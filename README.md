# Как установить

Python3 должен быть уже установлен.
* Скачайте код
* Установите зависимости  
```pip install -r requirements.txt```
* Запустите программу командой с названием файла, например:  
```python3 find_similar.py```

# find_similar.py

Код справшивает у пользователя ссылку на базу данных с фильмамии в формате json, отправляет ошибку `File not found, sorry...`, если файл не найден. Код выгружает данные, используя фукнцию `load_data()` из файла `own_db_helpers.py`. Далее, код справшивает название фильма, который нужно найти в базе данных  `Enter film to search for:`  (код возвращает только точные совпадения), и выдает ошибку `No such film in FilmsDB`, если фильм не найден.  Код печатает 8 рекомендованных фильмов в алфавитном порядке. Определение рекомендации идет по принципу расчета суммарного балла на основании 4 факторов:
1. Принадлежность к коллекции фильмов (1000 баллов).
2. Жанр (500 баллов).
3. Оригинальный язык (300 баллов).
4. Бюджет (100 баллов).

# hello_api_TMDB.py

Код спрашивает у пользователя ключ API (API Key v3 auth) от TMDB c помощью фукнции `get_user_api_key()` из файла `tmdb_helpers`, выдает ошибку `Invalid api key`, если ключ API неправильный.
Код печатает бюджет фильма "Пила II" - `4000000`.

# make_own_db.py

Код спрашивает у пользователя ключ API (API Key v3 auth) от TMDB c помощью фукнции `get_user_api_key()` из файла `tmdb_helpers`, выдает ошибку `Invalid api key`, если ключ API неправильный. Далее код выводит на экран:  
```please, wait, this operation may take smth like 15-20 minutes```,  
и начинает загрузку тысячи фильмов с сайта TMDB с ID фильма от 0 до 999. При этом код сообщает процент завершения работы, например:  
```44% percent complete```  
Затем код сохраняет полученные данные в формате json в файле `MyFilmDB.json`. (В окончательном файле будет меньше тысячи фильмов. При запуске кода сейчас в базу данных сохраняется 822 фильмов. В коде включена возможность отсутствия фильма с определенным ID, при этом код не прекащает работу с ошибкой.)

# own_db_helpers.py

Код содержит вспомогательную функцию `load_data()`, которая используется в кодах `find_similar.py` и `search_in_db.py`. Фукнция загружает json по полученному пути к файлу и возвращает словарь, или возвращает пустой ответ, если файл не существует. Код нельзя запустить с консоли самостоятельно.

# search_in_db.py

Код справшивает у пользователя ссылку на базу данных с фильмамии в формате json, отправляет ошибку `File not found, sorry...`, если файл не найден.  Код выгружает данные, используя фукнцию `load_data()` из файла `own_db_helpers.py`. Далее, код справшивает название фильма, который нужно найти в базе данных (код возвращает только точные совпадения), выдает ошибку `File not found, sorry...`. Далее код просит ввести название для поиска:    
```Enter film to search for:```  
Код печатает в алфавитном порядке фильмы, в которых содержится слово(а), введенное пользователем.

# tmdb_helpers.py

Код содержит три вспомогательные функции:

### make_tmdb_api_request()
Функция принимает три параметра: 
1. method - путь к url
2. api_key - ключ API
3. extra_params - дополнительные параметры, по умолчанию пусто.
Вызывает фукнцию `load_json_data_from_url()` и возвращает ее результат.

### load_json_data_from_url()
Фукнция принимает два параметра:
1. base_url - url запроса
2. url_params - параметры запроса
Функция отправляет запрос на url с полученными параметрами и возвращает ответ, полученный от запроса.

### get_user_api_key()
Код спрашивает у пользователя ключ API (API Key v3 auth) от TMDB и для проверки его правильности запускает фукнцию `make_tmdb_api_request()` - запускает страницу с фильмом "Ariel". Если фукнция выполнилась без ошибок, код возвращает ключ API. Код нельзя запустить с консоли самостоятельно.